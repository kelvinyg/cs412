{% extends 'mini_fb/base.html' %}

{% block title %}{{ profile.first_name }}'s Profile{% endblock %}

{% block content %}
<h2>{{ profile.first_name }} {{ profile.last_name }}'s Profile</h2>

<div class="profile-details">
    <!-- Display profile picture if it's present, otherwise skip -->
    <div class="profile-image">
    {% if profile.profile_pic %}
        <!-- No need for .url if it's not an ImageField -->
        <img src="{{ profile.profile_pic }}" alt="Profile Picture of {{ profile.first_name }}">
    {% endif %}
    </div>
    <p><strong>City:</strong> {{ profile.city }}</p>
    <p><strong>Email:</strong> {{ profile.email }}</p>
</div>


<div class="update-profile-link">
    <a href="{% url 'update_profile' pk=profile.pk %}" class="btn update-profile-btn">Update Profile</a>
</div>

<hr>

<h3>Status Messages</h3>
<div class="status-messages">
    {% if profile.get_status_messages %}
        <ul>
            {% for status in profile.get_status_messages %}
                <li>
                    <p>{{ status.message }}</p>
                    <small>Posted on: {{ status.timestamp }}</small>
                    
                    <!-- Display images associated with the status message -->
                    {% if status.get_images.all %}
                        <div class="status-images">
                            {% for img in status.get_images.all %}
                                <img src="{{ img.image_file.url }}" alt="Image for status message">
                            {% endfor %}
                        </div>
                    {% endif %}
                </li>
            {% empty %}
                <p>No status messages yet.</p>
            {% endfor %}
        </ul>
    {% else %}
        <p>No status messages available for this profile.</p>
    {% endif %}
</div>

<!-- Add the button to create a new message -->
<div class="create-status-button">
    <a href="{% url 'create_status' pk=profile.pk %}" class="btn btn-primary">Add Status Message</a>
</div>


{% endblock %}